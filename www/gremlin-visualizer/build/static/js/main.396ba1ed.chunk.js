(this["webpackJsonpgremlin-visualizer"]=this["webpackJsonpgremlin-visualizer"]||[]).push([[0],{134:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),s=a.n(o),l=a(36),i=a(79),c=a(26),d=a(22),p="".concat("http://localhost:3001","/query"),u="Invalid query. Please execute a query to get a set of vertices",y="SET_HOST",m="SET_PORT",h="SET_QUERY",b="SET_ERROR",E="SET_NETWORK",f="CLEAR_GRAPH",g="ADD_NODES",O="ADD_EDGES",v="SET_SELECTED_NODE",j="SET_SELECTED_EDGE",L="SET_IS_PHYSICS_ENABLED",w="ADD_QUERY_HISTORY",k="CLEAR_QUERY_HISTORY",P="SET_NODE_LABELS",N="ADD_NODE_LABEL",D="EDIT_NODE_LABEL",S="REMOVE_NODE_LABEL",_="REFRESH_NODE_LABELS",C="SET_NODE_LIMIT";function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var H={host:"localhost",port:"8182",query:"",error:null},R=a(18),q=a(48),A=a(11),I=a.n(A);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=function(e){var t;for(t in e)break;return t},G=function(e,t){return I.a.differenceBy(e,t,(function(e){return e.id}))},V=function(e,t){return I.a.differenceBy(e,t,(function(e){return"".concat(e.from,",").concat(e.to)}))},Y=function(e,t){return I.a.find(e,(function(e){return e.id===t}))},J=function(e){I.a.forOwn(e,(function(t,a){I.a.isString(t)||(e[a]=JSON.stringify(t))}))};function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F={network:null,nodeHolder:new q.a.DataSet([]),edgeHolder:new q.a.DataSet([]),nodes:[],edges:[],selectedNode:{},selectedEdge:{}};function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(Object(a),!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var K={nodeLabels:[],queryHistory:[],isPhysicsEnabled:!0,nodeLimit:100,networkOptions:{physics:{forceAtlas2Based:{gravitationalConstant:-26,centralGravity:.005,springLength:230,springConstant:.18,avoidOverlap:1.5},maxVelocity:40,solver:"forceAtlas2Based",timestep:.35,stabilization:{enabled:!0,iterations:50,updateInterval:25}},nodes:{shape:"dot",size:20,borderWidth:2,font:{size:11}},edges:{width:2,font:{size:11},smooth:{type:"dynamic"}}}},Z=a(23),$=a(24),ee=a(27),te=a(25),ae=a(29),ne=a(169),re=function(e){function t(){return Object(Z.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={nodes:this.props.nodeHolder,edges:this.props.edgeHolder},a=new q.a.Network(this.refs.myRef,t,this.props.networkOptions);a.on("selectNode",(function(t){var a=t.nodes&&t.nodes.length>0?t.nodes[0]:null;e.props.dispatch({type:v,payload:a})})),a.on("selectEdge",(function(t){var a=t.edges&&1===t.edges.length?t.edges[0]:null;t.nodes&&t.nodes.length>0||null===a||e.props.dispatch({type:j,payload:a})})),this.props.dispatch({type:E,payload:a})}},{key:"render",value:function(){return r.a.createElement("div",{ref:"myRef",className:"mynetwork"})}}]),t}(r.a.Component),oe=Object(c.b)((function(e){return{nodeHolder:e.graph.nodeHolder,edgeHolder:e.graph.edgeHolder,networkOptions:e.options.networkOptions}}))(re),se=a(179),le=a(166),ie=a(53),ce=a.n(ie),de=function(e,t,a,n){var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[],n=[],r=I.a.mapValues(I.a.keyBy(t,"type"),"field");return I.a.forEach(e,(function(e){var o=e.label;if(!r[o]){var s=Q(e.properties),l={type:o,field:s};t.push(l),r[o]=s}var i=r[o],c=i in e.properties?e.properties[i]:o;n.push({id:e.id,label:String(c),group:e.label,properties:e.properties,type:o}),a=a.concat(I.a.map(e.edges,(function(e){return B({},e,{type:e.label,arrows:{to:{enabled:!0,scaleFactor:.5}}})})))})),{edges:a,nodes:n,nodeLabels:t}}(e.data,a),o=r.nodes,s=r.edges,l=r.nodeLabels;n({type:g,payload:o}),n({type:O,payload:s}),n({type:P,payload:l}),n({type:w,payload:t})},pe=function(e){function t(){return Object(Z.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object($.a)(t,[{key:"clearGraph",value:function(){this.props.dispatch({type:f}),this.props.dispatch({type:k})}},{key:"sendQuery",value:function(){var e=this;this.props.dispatch({type:b,payload:null}),ce.a.post(p,{host:this.props.host,port:this.props.port,query:this.props.query,nodeLimit:this.props.nodeLimit},{headers:{"Content-Type":"application/json"}}).then((function(t){de(t,e.props.query,e.props.nodeLabels,e.props.dispatch)})).catch((function(t){e.props.dispatch({type:b,payload:u})}))}},{key:"onHostChanged",value:function(e){this.props.dispatch({type:y,payload:e})}},{key:"onPortChanged",value:function(e){this.props.dispatch({type:m,payload:e})}},{key:"onQueryChanged",value:function(e){this.props.dispatch({type:h,payload:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"header"},r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(se.a,{value:this.props.host,onChange:function(t){return e.onHostChanged(t.target.value)},id:"standard-basic",label:"host",style:{width:"10%"}}),r.a.createElement(se.a,{value:this.props.port,onChange:function(t){return e.onPortChanged(t.target.value)},id:"standard-basic",label:"port",style:{width:"10%"}}),r.a.createElement(se.a,{value:this.props.query,onChange:function(t){return e.onQueryChanged(t.target.value)},id:"standard-basic",label:"gremlin query",style:{width:"60%"}}),r.a.createElement(le.a,{variant:"contained",color:"primary",onClick:this.sendQuery.bind(this),style:{width:"150px"}},"Execute"),r.a.createElement(le.a,{variant:"outlined",color:"secondary",onClick:this.clearGraph.bind(this),style:{width:"150px"}},"Clear Graph")),r.a.createElement("br",null),r.a.createElement("div",{style:{color:"red"}},this.props.error))}}]),t}(r.a.Component),ue=Object(c.b)((function(e){return{host:e.gremlin.host,port:e.gremlin.port,query:e.gremlin.query,error:e.gremlin.error,nodes:e.graph.nodes,edges:e.graph.edges,nodeLabels:e.options.nodeLabels,nodeLimit:e.options.nodeLimit}}))(pe),ye=a(167),me=a(168),he=a(135),be=a(180),Ee=a(170),fe=a(49),ge=a(171),Oe=a(165),ve=a(181),je=a(172),Le=a(182),we=a(173),ke=a(174),Pe=a(175),Ne=a(176),De=a(177),Se=a(178),_e=a(63),Ce=a.n(_e),Te=a(87),xe=a.n(Te),He=a(82),Re=a.n(He),qe=a(86),Ae=a.n(qe),Ie=a(89),ze=a.n(Ie),Be=a(88),Qe=a.n(Be),Ge=a(81),Ve=function(e){function t(){return Object(Z.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object($.a)(t,[{key:"onAddNodeLabel",value:function(){this.props.dispatch({type:N})}},{key:"onEditNodeLabel",value:function(e,t){this.props.dispatch({type:D,payload:{id:e,nodeLabel:t}})}},{key:"onRemoveNodeLabel",value:function(e){this.props.dispatch({type:S,payload:e})}},{key:"onEditNodeLimit",value:function(e){this.props.dispatch({type:C,payload:e})}},{key:"onRefresh",value:function(){this.props.dispatch({type:_,payload:this.props.nodeLabels})}},{key:"onTraverse",value:function(e,t){var a=this,n="g.V('".concat(e,"').").concat(t,"()");ce.a.post(p,{host:this.props.host,port:this.props.port,query:n,nodeLimit:this.props.nodeLimit},{headers:{"Content-Type":"application/json"}}).then((function(e){de(e,n,a.props.nodeLabels,a.props.dispatch)})).catch((function(e){a.props.dispatch({type:b,payload:u})}))}},{key:"onTogglePhysics",value:function(e){if(this.props.dispatch({type:L,payload:e}),this.props.network){var t={smooth:{type:e?"dynamic":"continuous"}};this.props.network.setOptions({physics:e,edges:t})}}},{key:"generateList",value:function(e){var t=0;return e.map((function(e){return t+=1,r.a.cloneElement(r.a.createElement(ye.a,null,r.a.createElement(me.a,{primary:e})),{key:t})}))}},{key:"generateNodeLabelList",value:function(e){var t=this,a=-1;return e.map((function(e){return a+=1,e.index=a,r.a.cloneElement(r.a.createElement(ye.a,null,r.a.createElement(se.a,{id:"standard-basic",label:"Node Type",InputLabelProps:{shrink:!0},value:e.type,onChange:function(a){var n=a.target.value,r=e.field;t.onEditNodeLabel(e.index,{type:n,field:r})}}),r.a.createElement(se.a,{id:"standard-basic",label:"Label Field",InputLabelProps:{shrink:!0},value:e.field,onChange:function(a){var n=a.target.value,r=e.type;t.onEditNodeLabel(e.index,{type:r,field:n})}}),r.a.createElement(he.a,{"aria-label":"delete",size:"small",onClick:function(){return t.onRemoveNodeLabel(e.index)}},r.a.createElement(Re.a,{fontSize:"small"}))),{key:a})}))}},{key:"render",value:function(){var e=this,t=!1,a=null,n=null,o=null,s=null;return I.a.isEmpty(this.props.selectedNode)?I.a.isEmpty(this.props.selectedEdge)||(t=!0,a=I.a.get(this.props.selectedEdge,"type"),n=I.a.get(this.props.selectedEdge,"id"),o=I.a.get(this.props.selectedEdge,"properties"),s="Edge",J(o)):(t=!0,a=I.a.get(this.props.selectedNode,"type"),n=I.a.get(this.props.selectedNode,"id"),o=I.a.get(this.props.selectedNode,"properties"),J(o),s="Node"),r.a.createElement("div",{className:"details"},r.a.createElement(ne.a,{container:!0,spacing:2},r.a.createElement(ne.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(be.a,null,r.a.createElement(Ee.a,{expandIcon:r.a.createElement(Ce.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(fe.a,null,"Query History")),r.a.createElement(ge.a,null,r.a.createElement(Oe.a,{dense:!0},this.generateList(this.props.queryHistory)))),r.a.createElement(be.a,null,r.a.createElement(Ee.a,{expandIcon:r.a.createElement(Ce.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(fe.a,null,"Settings")),r.a.createElement(ge.a,null,r.a.createElement(ne.a,{container:!0,spacing:2},r.a.createElement(ne.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(ve.a,{title:"Automatically stabilize the graph","aria-label":"add"},r.a.createElement(je.a,{control:r.a.createElement(Le.a,{checked:this.props.isPhysicsEnabled,onChange:function(){e.onTogglePhysics(!e.props.isPhysicsEnabled)},value:"physics",color:"primary"}),label:"Enable Physics"})),r.a.createElement(we.a,null)),r.a.createElement(ne.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(ve.a,{title:"Number of maximum nodes which should return from the query. Empty or 0 has no restrictions.","aria-label":"add"},r.a.createElement(se.a,{label:"Node Limit",type:"Number",variant:"outlined",value:this.props.nodeLimit,onChange:function(t){var a=t.target.value;e.onEditNodeLimit(a)}}))),r.a.createElement(ne.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(we.a,null)),r.a.createElement(ne.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(fe.a,null,"Node Labels")),r.a.createElement(ne.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(Oe.a,{dense:!0},this.generateNodeLabelList(this.props.nodeLabels))),r.a.createElement(ne.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(ke.a,{variant:"extended",color:"primary",size:"small",onClick:this.onRefresh.bind(this)},r.a.createElement(Ae.a,null),"Refresh"),r.a.createElement(ke.a,{variant:"extended",size:"small",onClick:this.onAddNodeLabel.bind(this)},r.a.createElement(xe.a,null),"Add Node Label")))))),t&&r.a.createElement(ne.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement("h2",null,"Information: ",s),"Node"===s&&r.a.createElement(ne.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(ne.a,{container:!0,spacing:2},r.a.createElement(ne.a,{item:!0,xs:6,sm:6,md:6},r.a.createElement(ke.a,{variant:"extended",size:"small",onClick:function(){return e.onTraverse(n,"out")}},"Traverse Out Edges",r.a.createElement(Qe.a,null))),r.a.createElement(ne.a,{item:!0,xs:6,sm:6,md:6},r.a.createElement(ke.a,{variant:"extended",size:"small",onClick:function(){return e.onTraverse(n,"in")}},"Traverse In Edges",r.a.createElement(ze.a,null))))),r.a.createElement(ne.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(ne.a,{container:!0},r.a.createElement(Pe.a,{"aria-label":"simple table"},r.a.createElement(Ne.a,null,r.a.createElement(De.a,{key:"type"},r.a.createElement(Se.a,{scope:"row"},"Type"),r.a.createElement(Se.a,{align:"left"},String(a))),r.a.createElement(De.a,{key:"id"},r.a.createElement(Se.a,{scope:"row"},"ID"),r.a.createElement(Se.a,{align:"left"},String(n))))),r.a.createElement(Ge.JsonToTable,{json:o}))))))}}]),t}(r.a.Component),Ye=Object(c.b)((function(e){return{host:e.gremlin.host,port:e.gremlin.port,network:e.graph.network,selectedNode:e.graph.selectedNode,selectedEdge:e.graph.selectedEdge,queryHistory:e.options.queryHistory,nodeLabels:e.options.nodeLabels,nodeLimit:e.options.nodeLimit,isPhysicsEnabled:e.options.isPhysicsEnabled}}))(Ve),Je=function(e){function t(){return Object(Z.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ne.a,{container:!0,spacing:1},r.a.createElement(ne.a,{item:!0,xs:12,sm:12,md:12},r.a.createElement(ue,null)),r.a.createElement(ne.a,{item:!0,xs:12,sm:9,md:9},r.a.createElement(oe,null)),r.a.createElement(ne.a,{item:!0,xs:12,sm:3,md:3},r.a.createElement(Ye,null))))}}]),t}(r.a.Component),Me=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,Ue=Object(l.c)({gremlin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return x({},e,{host:t.payload});case m:return x({},e,{port:t.payload});case h:return x({},e,{query:t.payload,error:null});case b:return x({},e,{error:t.payload});default:return e}},graph:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return e.nodeHolder.clear(),e.edgeHolder.clear(),U({},e,{nodes:[],edges:[],selectedNode:{},selectedEdge:{}});case E:return U({},e,{network:t.payload});case g:var a=G(t.payload,e.nodes),n=[].concat(Object(R.a)(e.nodes),Object(R.a)(a));return e.nodeHolder.add(a),U({},e,{nodes:n});case O:var r=V(t.payload,e.edges),o=[].concat(Object(R.a)(e.edges),Object(R.a)(r));return e.edgeHolder.add(r),U({},e,{edges:o});case v:var s=t.payload,l={};return null!==s&&(l=Y(e.nodes,s)),U({},e,{selectedNode:l,selectedEdge:{}});case j:var i=t.payload,c={};return null!==i&&(c=Y(e.edges,i)),U({},e,{selectedEdge:c,selectedNode:{}});case _:var d=I.a.mapValues(I.a.keyBy(t.payload,"type"),"field");return I.a.map(e.nodes,(function(t){if(t.type in d){var a=d[t.type],n=t.properties[a];return e.nodeHolder.update({id:t.id,label:n}),U({},t,{label:n})}return t})),e;default:return e}},options:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:var a=I.a.get(t,"payload",!0);return X({},e,{isPhysicsEnabled:a});case w:return X({},e,{queryHistory:[].concat(Object(R.a)(e.queryHistory),[t.payload])});case k:return X({},e,{queryHistory:[]});case P:var n=I.a.get(t,"payload",[]);return X({},e,{nodeLabels:n});case N:var r=[].concat(Object(R.a)(e.nodeLabels),[{}]);return X({},e,{nodeLabels:r});case D:var o=t.payload.id,s=t.payload.nodeLabel;if(e.nodeLabels[o]){var l=[].concat(Object(R.a)(e.nodeLabels.slice(0,o)),[s],Object(R.a)(e.nodeLabels.slice(o+1)));return X({},e,{nodeLabels:l})}return e;case S:var i=t.payload;if(i<e.nodeLabels.length){var c=[].concat(Object(R.a)(e.nodeLabels.slice(0,i)),Object(R.a)(e.nodeLabels.slice(i+1)));return X({},e,{nodeLabels:c})}return e;case C:var d=t.payload;return X({},e,{nodeLimit:d});default:return e}}}),Fe=Object(l.e)(Ue,Me(Object(l.a)(Object(i.createLogger)())));s.a.render(r.a.createElement(c.a,{store:Fe},r.a.createElement(Je,null)),document.getElementById("root"))},99:function(e,t,a){e.exports=a(134)}},[[99,1,2]]]);
//# sourceMappingURL=main.396ba1ed.chunk.js.map